<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <record id="ir_cron_scheduler_delaytime" model="ir.cron">
             <field name="name">Run DelayTime Scheduler</field>
             <field name="model_id" ref="model_simplit_hr_delay"/>
             <field name="state">code</field>
             <field name="code">model.run_delay_time_scheduler()</field>
             <field name="interval_number">1</field>
             <field name="interval_type">days</field>
             <field name="numbercall">-1</field>
             <field name="doall" eval="False"/>
        </record>
        <record id="delaytime_cancel_action_server" model="ir.actions.server">
            <field name="name">Cancel</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_simplit_hr_delay"/>
             <field name="binding_model_id" ref="model_simplit_hr_delay"/>
            <field name="state">code</field>
            <field name="code">records.write({'state':'cancel'})</field>
        </record>

        <record id="delaytime_approval_submit_action_server" model="ir.actions.server">
            <field name="name">Approval For Delay</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_simplit_delay_approval"/>
            <field name="binding_model_id" ref="model_simplit_delay_approval"/>
            <field name="state">code</field>
            <field name="code">records.write({'state':'validate'})</field>
        </record>

         <record id="late_login" model="hr.salary.rule.category">
            <field name="name">Delay Time</field>
            <field name="code">LATE LOGIN</field>
        </record>

        <record id="salary_rule_delaytime" model="hr.salary.rule">
          <field name="struct_id" ref="l10n_ae_hr_payroll.uae_employee_payroll_structure"/>
            <field name="code">LATE LOGIN</field>
            <field name="name">Delay Time</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">if payslip.fixed:
    result = payslip.penalty
elif payslip.wage:
    result = sum(contract.related_compensation.filtered(lambda x: (x.name.component_type == 'housing_allowance' and x.amount_type == 'amount' and x.state == 'active') or (x.name.component_type == 'basic_pay' and x.amount_type == 'amount' and x.state == 'active') or (x.name.component_type == 'transportation_allowance' and x.amount_type == 'amount' and x.state == 'active')).mapped('amount'))/employee.get_btw_dates_working_days(payslip.date_from, payslip.date_to)/employee.resource_calendar_id.hours_per_day *(payslip.total_delay_time)
else:
    result=0

            </field>
            <field name="sequence" eval="104"/>
        </record>
    </data>
</odoo>
